var objectFitVideos=function(t){"use strict";function e(t){for(var e=getComputedStyle(t).fontFamily,i=null,n={};null!==(i=c.exec(e));)n[i[1]]=i[2];return n["object-position"]?o(n):n}function i(t,e){function i(){var t=c/a,i=p.clientWidth,o=p.clientHeight,n=i/o;if(d.marginLeft=d.marginTop=0,t<n?"contain"===e["object-fit"]:"cover"===e["object-fit"]){var r=o*t;d.width=Math.round(r)+"px",d.height=o+"px","left"===e["object-position-x"]?d.marginLeft=0:"right"===e["object-position-x"]?d.marginLeft=Math.round(i-r)+"px":d.marginLeft=Math.round((i-r)/2)+"px"}else{var s=i/t;d.width=i+"px",d.height=Math.round(s)+"px","top"===e["object-position-y"]?d.marginTop=0:"bottom"===e["object-position-y"]?d.marginTop=Math.round(o-s)+"px":d.marginTop=Math.round((o-s)/2)+"px"}}function o(){t.videoWidth===c&&t.videoHeight===a||(c=t.videoWidth,a=t.videoHeight,i())}function n(){c=t.videoWidth,a=t.videoHeight,c&&a?(i(),t.addEventListener("timeupdate",o),t.addEventListener("ended",function e(){t.removeEventListener("timeupdate",o),t.removeEventListener("ended",e)})):window.setTimeout(n,50)}if("fill"!==e["object-fit"]){var d=t.style,r=window.getComputedStyle(t),c=0,a=0,p=document.createElement("object-fit");p.appendChild(t.parentNode.replaceChild(p,t));var s={height:"100%",width:"100%",boxSizing:"content-box",display:"inline-block",overflow:"hidden"};"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight left opacity margin position right top visibility".replace(/\w+/g,function(t){s[t]=r[t]});for(var l in s)p.style[l]=s[l];d.border=d.margin=d.padding=0,d.display="block",d.opacity=1,t.addEventListener("loadedmetadata",n),window.addEventListener("optimizedResize",n),t.readyState>=1&&(t.removeEventListener("loadedmetadata",n),n())}}function o(t){return~t["object-position"].indexOf("left")?t["object-position-x"]="left":~t["object-position"].indexOf("right")?t["object-position-x"]="right":t["object-position-x"]="center",~t["object-position"].indexOf("top")?t["object-position-y"]="top":~t["object-position"].indexOf("bottom")?t["object-position-y"]="bottom":t["object-position-y"]="center",t}var n=new Image,d="object-fit"in n.style,r="object-position"in n.style,c=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g;d&&r||(function(t){var o=-1;t=t||"video","string"==typeof t?t=document.querySelectorAll(t):"length"in t||(t=[t]);for(;t[++o];){var n=e(t[o]);(n["object-fit"]||n["object-position"])&&(n["object-fit"]=n["object-fit"]||"fill",i(t[o],n))}}(t),function(t,e,i){i=i||window;var o=!1,n=null;try{n=new CustomEvent(e)}catch(t){n=document.createEvent("Event"),n.initEvent(e,!0,!0)}var d=function(){o||(o=!0,requestAnimationFrame(function(){i.dispatchEvent(n),o=!1}))};i.addEventListener(t,d)}("resize","optimizedResize"))};"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=objectFitVideos);